define(["exports","./Matrix2-9aa31791","./RuntimeError-346a3079","./when-4bbc8319","./ComponentDatatype-93750d1a"],function(t,a,i,n,e){"use strict";function s(t,a,i,n,e,s,r){var h=t*i*(4+t*(4-3*i))/16;return(1-h)*t*a*(n+h*e*(r+h*s*(2*r*r-1)))}var r=new a.Cartesian3,h=new a.Cartesian3;function o(t,i,n,o){var d,u,c,M,l,g,p,_,f,m,v,C,H,O,S,q,U,b,w,A,R;a.Cartesian3.normalize(o.cartographicToCartesian(i,h),r),a.Cartesian3.normalize(o.cartographicToCartesian(n,h),h),function(t,a,i,n,r,h,o){var d,u,c,M,l,g=(a-i)/a,p=h-n,_=Math.atan((1-g)*Math.tan(r)),f=Math.atan((1-g)*Math.tan(o)),m=Math.cos(_),v=Math.sin(_),C=Math.cos(f),H=Math.sin(f),O=m*C,S=m*H,q=v*H,U=v*C,b=p,w=e.CesiumMath.TWO_PI,A=Math.cos(b),R=Math.sin(b);do{A=Math.cos(b),R=Math.sin(b);var y,E=S-U*A;d=Math.atan2(c=Math.sqrt(C*C*R*R+E*E),u=q+O*A),0===c?(y=0,M=1):M=1-(y=O*R/c)*y,w=b,isFinite(l=u-2*q/M)||(l=0),b=p+s(g,y,M,d,c,u,l)}while(Math.abs(b-w)>e.CesiumMath.EPSILON12);var x=M*(a*a-i*i)/(i*i),D=x*(256+x*(x*(74-47*x)-128))/1024,P=l*l,T=i*(1+x*(4096+x*(x*(320-175*x)-768))/16384)*(d-D*c*(l+D*(u*(2*P-1)-D*l*(4*c*c-3)*(4*P-3)/6)/4)),z=Math.atan2(C*R,S-U*A),F=Math.atan2(m*R,S*A-U);t._distance=T,t._startHeading=z,t._endHeading=F,t._uSquared=x}(t,o.maximumRadius,o.minimumRadius,i.longitude,i.latitude,n.longitude,n.latitude),t._start=a.Cartographic.clone(i,t._start),t._end=a.Cartographic.clone(n,t._end),t._start.height=0,t._end.height=0,d=t._uSquared,M=((u=t._ellipsoid.maximumRadius)-(c=t._ellipsoid.minimumRadius))/u,l=Math.cos(t._startHeading),g=Math.sin(t._startHeading),_=1/Math.sqrt(1+(p=(1-M)*Math.tan(t._start.latitude))*p),f=Math.atan2(p,l),C=1-(v=(m=_*g)*m),S=(O=(H=d/4)*H)*H,q=O*O,U=1+H-3*O/4+5*S/4-175*q/64,b=1-H+15*O/8-35*S/8,w=1-3*H+35*O/4,A=1-5*H,(R=t._constants).a=u,R.b=c,R.f=M,R.cosineHeading=l,R.sineHeading=g,R.tanU=p,R.cosineU=_,R.sineU=_*p,R.sigma=f,R.sineAlpha=m,R.sineSquaredAlpha=v,R.cosineSquaredAlpha=C,R.cosineAlpha=Math.sqrt(C),R.u2Over4=H,R.u4Over16=O,R.u6Over64=S,R.u8Over256=q,R.a0=U,R.a1=b,R.a2=w,R.a3=A,R.distanceRatio=U*f-b*Math.sin(2*f)*H/2-w*Math.sin(4*f)*O/16-A*Math.sin(6*f)*S/48-5*Math.sin(8*f)*q/512}function d(t,i,e){var s=n.defaultValue(e,a.Ellipsoid.WGS84);this._ellipsoid=s,this._start=new a.Cartographic,this._end=new a.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,n.defined(t)&&n.defined(i)&&o(this,t,i,s)}Object.defineProperties(d.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),d.prototype.setEndPoints=function(t,a){o(this,t,a,this._ellipsoid)},d.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},d.prototype.interpolateUsingSurfaceDistance=function(t,i){var e=this._constants,r=e.distanceRatio+t/e.b,h=Math.cos(2*r),o=Math.sin(2*r),d=Math.sin(4*r),u=r*r,c=e.u8Over256,M=e.u2Over4,l=e.u6Over64,g=e.u4Over16,p=2*(r*u)*c*h/3+r*(1-M+7*g/4-15*l/4+579*c/64-(g-15*l/4+187*c/16)*h-(5*l/4-115*c/16)*Math.cos(4*r)-29*c*Math.cos(6*r)/16)+(M/2-g+71*l/32-85*c/16)*o+(5*g/16-5*l/4+383*c/96)*d-u*((l-11*c/2)*o+5*c*d/2)+(29*l/96-29*c/16)*Math.sin(6*r)+539*c*Math.sin(8*r)/1536,_=Math.asin(Math.sin(p)*e.cosineAlpha),f=Math.atan(e.a/e.b*Math.tan(_));p-=e.sigma;var m=Math.cos(2*e.sigma+p),v=Math.sin(p),C=Math.cos(p),H=e.cosineU*C,O=e.sineU*v,S=Math.atan2(v*e.sineHeading,H-O*e.cosineHeading)-s(e.f,e.sineAlpha,e.cosineSquaredAlpha,p,v,C,m);return n.defined(i)?(i.longitude=this._start.longitude+S,i.latitude=f,i.height=0,i):new a.Cartographic(this._start.longitude+S,f,0)},t.EllipsoidGeodesic=d});