define(["exports","./Matrix2-9aa31791","./RuntimeError-346a3079","./when-4bbc8319","./WebGLConstants-1c8239cc","./Transforms-d13cc04e"],function(t,e,a,r,n,i){"use strict";var o=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3}),s={POINTS:n.WebGLConstants.POINTS,LINES:n.WebGLConstants.LINES,LINE_LOOP:n.WebGLConstants.LINE_LOOP,LINE_STRIP:n.WebGLConstants.LINE_STRIP,TRIANGLES:n.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:n.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:n.WebGLConstants.TRIANGLE_FAN,validate:function(t){return t===s.POINTS||t===s.LINES||t===s.LINE_LOOP||t===s.LINE_STRIP||t===s.TRIANGLES||t===s.TRIANGLE_STRIP||t===s.TRIANGLE_FAN}},u=Object.freeze(s);function I(t){t=r.defaultValue(t,r.defaultValue.EMPTY_OBJECT),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=r.defaultValue(t.primitiveType,u.TRIANGLES),this.boundingSphere=t.boundingSphere,this.geometryType=r.defaultValue(t.geometryType,o.NONE),this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute}I.computeNumberOfVertices=function(t){var e=-1;for(var a in t.attributes)if(t.attributes.hasOwnProperty(a)&&r.defined(t.attributes[a])&&r.defined(t.attributes[a].values)){var n=t.attributes[a];e=n.values.length/n.componentsPerAttribute}return e};var N=new e.Cartographic,T=new e.Cartesian3,c=new e.Matrix4,l=[new e.Cartographic,new e.Cartographic,new e.Cartographic],m=[new e.Cartesian2,new e.Cartesian2,new e.Cartesian2],p=[new e.Cartesian2,new e.Cartesian2,new e.Cartesian2],y=new e.Cartesian3,E=new i.Quaternion,b=new e.Matrix4,L=new e.Matrix2;I._textureCoordinateRotationPoints=function(t,a,r,n){var o,s=e.Rectangle.center(n,N),u=e.Cartographic.toCartesian(s,r,T),I=i.Transforms.eastNorthUpToFixedFrame(u,r,c),f=e.Matrix4.inverse(I,c);l[0].longitude=n.west,l[0].latitude=n.south,l[1].longitude=n.west,l[1].latitude=n.north,l[2].longitude=n.east,l[2].latitude=n.south;var h=y;for(o=0;o<3;o++)e.Cartographic.toCartesian(l[o],r,h),h=e.Matrix4.multiplyByPointAsVector(f,h,h),m[o].x=h.x,m[o].y=h.y;var C=i.Quaternion.fromAxisAngle(e.Cartesian3.UNIT_Z,-a,E),x=e.Matrix3.fromQuaternion(C,b),d=t.length,A=Number.POSITIVE_INFINITY,P=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,G=Number.NEGATIVE_INFINITY;for(o=0;o<d;o++)h=e.Matrix4.multiplyByPointAsVector(f,t[o],h),A=Math.min(A,(h=e.Matrix3.multiplyByVector(x,h,h)).x),P=Math.min(P,h.y),S=Math.max(S,h.x),G=Math.max(G,h.y);var v=e.Matrix2.fromRotation(a,L);p[0].x=A,p[0].y=P,p[1].x=A,p[1].y=G,p[2].x=S,p[2].y=P;var R=m[0],w=m[2].x-R.x,O=m[1].y-R.y;for(o=0;o<3;o++){var _=p[o];e.Matrix2.multiplyByVector(v,_,_),_.x=(_.x-R.x)/w,_.y=(_.y-R.y)/O}var g=p[0],V=p[1],M=p[2],F=Array(6);return e.Cartesian2.pack(g,F),e.Cartesian2.pack(V,F,2),e.Cartesian2.pack(M,F,4),F},t.Geometry=I,t.GeometryAttribute=function(t){t=r.defaultValue(t,r.defaultValue.EMPTY_OBJECT),this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=r.defaultValue(t.normalize,!1),this.values=t.values},t.GeometryType=o,t.PrimitiveType=u});