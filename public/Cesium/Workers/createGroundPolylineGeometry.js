define(["./Transforms-f17097e5","./Matrix2-7a8e9daf","./Matrix3-b2351961","./defaultValue-f6d5e6da","./Math-355606c6","./ArcType-26a3f38d","./arrayRemoveDuplicates-0d8dde26","./ComponentDatatype-ab629b88","./EllipsoidGeodesic-20aaff03","./EllipsoidRhumbLine-1289f7e8","./EncodedCartesian3-abad5e8c","./GeometryAttribute-9c1a6bab","./IntersectionTests-f1b36d69","./Plane-5931b53e","./WebMercatorProjection-db7467f4","./combine-0c102d93","./RuntimeError-9b4ce3fb","./WebGLConstants-7f557f93"],function(e,t,a,n,i,r,s,o,l,u,c,C,d,p,h,g,f,m){"use strict";function w(i){i=n.defaultValue(i,n.defaultValue.EMPTY_OBJECT),this._ellipsoid=n.defaultValue(i.ellipsoid,a.Ellipsoid.WGS84),this._rectangle=n.defaultValue(i.rectangle,t.Rectangle.MAX_VALUE),this._projection=new e.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=n.defaultValue(i.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=n.defaultValue(i.numberOfLevelZeroTilesY,1)}Object.defineProperties(w.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),w.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},w.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},w.prototype.rectangleToNativeRectangle=function(e,a){let r=i.CesiumMath.toDegrees(e.west),s=i.CesiumMath.toDegrees(e.south),o=i.CesiumMath.toDegrees(e.east),l=i.CesiumMath.toDegrees(e.north);return n.defined(a)?(a.west=r,a.south=s,a.east=o,a.north=l,a):new t.Rectangle(r,s,o,l)},w.prototype.tileXYToNativeRectangle=function(e,t,a,n){let r=this.tileXYToRectangle(e,t,a,n);return r.west=i.CesiumMath.toDegrees(r.west),r.south=i.CesiumMath.toDegrees(r.south),r.east=i.CesiumMath.toDegrees(r.east),r.north=i.CesiumMath.toDegrees(r.north),r},w.prototype.tileXYToRectangle=function(e,a,i,r){let s=this._rectangle,o=this.getNumberOfXTilesAtLevel(i),l=this.getNumberOfYTilesAtLevel(i),u=s.width/o,c=e*u+s.west,C=(e+1)*u+s.west,d=s.height/l,p=s.north-a*d,h=s.north-(a+1)*d;return n.defined(r)||(r=new t.Rectangle(c,h,C,p)),r.west=c,r.south=h,r.east=C,r.north=p,r},w.prototype.positionToTileXY=function(e,a,r){let s=this._rectangle;if(!t.Rectangle.contains(s,e))return;let o=this.getNumberOfXTilesAtLevel(a),l=this.getNumberOfYTilesAtLevel(a),u=s.width/o,c=s.height/l,C=e.longitude;s.east<s.west&&(C+=i.CesiumMath.TWO_PI);let d=(C-s.west)/u|0;d>=o&&(d=o-1);let p=(s.north-e.latitude)/c|0;return p>=l&&(p=l-1),n.defined(r)?(r.x=d,r.y=p,r):new t.Cartesian2(d,p)};let y=new a.Cartesian3,M=new a.Cartesian3,T=new a.Cartographic,E=new a.Cartesian3,_=new a.Cartesian3,O=new e.BoundingSphere,b=new w,P=[new a.Cartographic,new a.Cartographic,new a.Cartographic,new a.Cartographic],A=new t.Cartesian2,k={};function L(e){let t;a.Cartographic.fromRadians(e.east,e.north,0,P[0]),a.Cartographic.fromRadians(e.west,e.north,0,P[1]),a.Cartographic.fromRadians(e.east,e.south,0,P[2]),a.Cartographic.fromRadians(e.west,e.south,0,P[3]);let n=0,i=0,r=0,s=0,o=k._terrainHeightsMaxLevel;for(t=0;t<=o;++t){let e=!1;for(let a=0;a<4;++a){let n=P[a];if(b.positionToTileXY(n,t,A),0===a)r=A.x,s=A.y;else if(r!==A.x||s!==A.y){e=!0;break}}if(e)break;n=r,i=s}if(0!==t)return{x:n,y:i,level:t>o?o:t-1}}k.initialize=function(){let t=k._initPromise;return n.defined(t)||(t=e.Resource.fetchJson(e.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){k._terrainHeights=e}),k._initPromise=t),t},k.getMinimumMaximumHeights=function(e,i){i=n.defaultValue(i,a.Ellipsoid.WGS84);let r=L(e),s=k._defaultMinTerrainHeight,o=k._defaultMaxTerrainHeight;if(n.defined(r)){let l=`${r.level}-${r.x}-${r.y}`,u=k._terrainHeights[l];n.defined(u)&&(s=u[0],o=u[1]),i.cartographicToCartesian(t.Rectangle.northeast(e,T),y),i.cartographicToCartesian(t.Rectangle.southwest(e,T),M),a.Cartesian3.midpoint(M,y,E);let c=i.scaleToGeodeticSurface(E,_);if(n.defined(c)){let e=a.Cartesian3.distance(E,c);s=Math.min(s,-e)}else s=k._defaultMinTerrainHeight}return{minimumTerrainHeight:s=Math.max(k._defaultMinTerrainHeight,s),maximumTerrainHeight:o}},k.getBoundingSphere=function(t,i){i=n.defaultValue(i,a.Ellipsoid.WGS84);let r=L(t),s=k._defaultMaxTerrainHeight;if(n.defined(r)){let e=`${r.level}-${r.x}-${r.y}`,t=k._terrainHeights[e];n.defined(t)&&(s=t[1])}let o=e.BoundingSphere.fromRectangle3D(t,i,0);return e.BoundingSphere.fromRectangle3D(t,i,s,O),e.BoundingSphere.union(o,O,o)},k._terrainHeightsMaxLevel=6,k._defaultMaxTerrainHeight=9e3,k._defaultMinTerrainHeight=-1e5,k._terrainHeights=void 0,k._initPromise=void 0,Object.defineProperties(k,{initialized:{get:function(){return n.defined(k._terrainHeights)}}});let S=[e.GeographicProjection,h.WebMercatorProjection],x=S.length,I=Math.cos(i.CesiumMath.toRadians(30)),N=Math.cos(i.CesiumMath.toRadians(150));function R(e){let t=(e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT)).positions;this.width=n.defaultValue(e.width,1),this._positions=t,this.granularity=n.defaultValue(e.granularity,9999),this.loop=n.defaultValue(e.loop,!1),this.arcType=n.defaultValue(e.arcType,r.ArcType.GEODESIC),this._ellipsoid=a.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(R.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+a.Ellipsoid.packedLength+1+1}}}),R.setProjectionAndEllipsoid=function(e,t){let a=0;for(let e=0;e<x;e++)if(t instanceof S[e]){a=e;break}e._projectionIndex=a,e._ellipsoid=t.ellipsoid};let D=new a.Cartesian3,v=new a.Cartesian3,z=new a.Cartesian3;function H(e,t,n,i,r){let s=q(i,e,0,D),o=q(i,e,n,v),l=q(i,t,0,z),u=X(o,s,v),c=X(l,s,z);return a.Cartesian3.cross(c,u,r),a.Cartesian3.normalize(r,r)}let B=new a.Cartographic,V=new a.Cartesian3,j=new a.Cartesian3,G=new a.Cartesian3;function Y(e,t,n,i,s,o,c,C,d,p,h){let g;if(0===s)return;o===r.ArcType.GEODESIC?g=new l.EllipsoidGeodesic(e,t,c):o===r.ArcType.RHUMB&&(g=new u.EllipsoidRhumbLine(e,t,c));let f=g.surfaceDistance;if(f<s)return;let m=H(e,t,i,c,G),w=Math.ceil(f/s),y=f/w,M=y,T=w-1,E=C.length;for(let e=0;e<T;e++){let e=g.interpolateUsingSurfaceDistance(M,B),t=q(c,e,n,V),r=q(c,e,i,j);a.Cartesian3.pack(m,C,E),a.Cartesian3.pack(t,d,E),a.Cartesian3.pack(r,p,E),h.push(e.latitude),h.push(e.longitude),E+=3,M+=y}}let F=new a.Cartographic;function q(e,t,n,i){return a.Cartographic.clone(t,F),F.height=n,a.Cartographic.toCartesian(F,e,i)}function X(e,t,n){return a.Cartesian3.subtract(e,t,n),a.Cartesian3.normalize(n,n),n}function W(e,t,n,i){return i=X(e,t,i),i=a.Cartesian3.cross(i,n,i),i=a.Cartesian3.normalize(i,i),i=a.Cartesian3.cross(n,i,i)}R.pack=function(e,t,i){let r=n.defaultValue(i,0),s=e._positions,o=s.length;t[r++]=o;for(let e=0;e<o;++e){let n=s[e];a.Cartesian3.pack(n,t,r),r+=3}return t[r++]=e.granularity,t[r++]=e.loop?1:0,t[r++]=e.arcType,a.Ellipsoid.pack(e._ellipsoid,t,r),r+=a.Ellipsoid.packedLength,t[r++]=e._projectionIndex,t[r++]=e._scene3DOnly?1:0,t},R.unpack=function(e,t,i){let r=n.defaultValue(t,0),s=e[r++],o=Array(s);for(let t=0;t<s;t++)o[t]=a.Cartesian3.unpack(e,r),r+=3;let l=e[r++],u=1===e[r++],c=e[r++],C=a.Ellipsoid.unpack(e,r);r+=a.Ellipsoid.packedLength;let d=e[r++],p=1===e[r++];return n.defined(i)||(i=new R({positions:o})),i._positions=o,i.granularity=l,i.loop=u,i.arcType=c,i._ellipsoid=C,i._projectionIndex=d,i._scene3DOnly=p,i};let U=new a.Cartesian3,Z=new a.Cartesian3,$=new a.Cartesian3,J=new a.Cartesian3;function Q(e,t,n,r,s){let o=X(n,t,J),l=W(e,t,o,U),u=W(r,t,o,Z);if(i.CesiumMath.equalsEpsilon(a.Cartesian3.dot(l,u),-1,i.CesiumMath.EPSILON5))return s=a.Cartesian3.cross(o,l,s),s=a.Cartesian3.normalize(s,s);s=a.Cartesian3.add(u,l,s),s=a.Cartesian3.normalize(s,s);let c=a.Cartesian3.cross(o,s,$);return 0>a.Cartesian3.dot(u,c)&&(s=a.Cartesian3.negate(s,s)),s}let K=p.Plane.fromPointNormal(a.Cartesian3.ZERO,a.Cartesian3.UNIT_Y),ee=new a.Cartesian3,et=new a.Cartesian3,ea=new a.Cartesian3,en=new a.Cartesian3,ei=new a.Cartesian3,er=new a.Cartesian3,es=new a.Cartographic,eo=new a.Cartographic,el=new a.Cartographic;R.createGeometry=function(l){let p,h,g,f,m,w,y,M,T;let E=!l._scene3DOnly,_=l.loop,O=l._ellipsoid,b=l.granularity,P=l.arcType,A=new S[l._projectionIndex](O),L=l._positions,x=L.length;2===x&&(_=!1);let N=new u.EllipsoidRhumbLine(void 0,void 0,O),R=[L[0]];for(h=0;h<x-1;h++)g=L[h],f=L[h+1],y=d.IntersectionTests.lineSegmentPlane(g,f,K,er),!n.defined(y)||a.Cartesian3.equalsEpsilon(y,g,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(y,f,i.CesiumMath.EPSILON7)||(l.arcType===r.ArcType.GEODESIC?R.push(a.Cartesian3.clone(y)):l.arcType===r.ArcType.RHUMB&&(T=O.cartesianToCartographic(y,es).longitude,m=O.cartesianToCartographic(g,es),w=O.cartesianToCartographic(f,eo),N.setEndPoints(m,w),M=N.findIntersectionWithLongitude(T,el),y=O.cartographicToCartesian(M,er),!n.defined(y)||a.Cartesian3.equalsEpsilon(y,g,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(y,f,i.CesiumMath.EPSILON7)||R.push(a.Cartesian3.clone(y)))),R.push(f);_&&(g=L[x-1],f=L[0],y=d.IntersectionTests.lineSegmentPlane(g,f,K,er),!n.defined(y)||a.Cartesian3.equalsEpsilon(y,g,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(y,f,i.CesiumMath.EPSILON7)||(l.arcType===r.ArcType.GEODESIC?R.push(a.Cartesian3.clone(y)):l.arcType===r.ArcType.RHUMB&&(T=O.cartesianToCartographic(y,es).longitude,m=O.cartesianToCartographic(g,es),w=O.cartesianToCartographic(f,eo),N.setEndPoints(m,w),M=N.findIntersectionWithLongitude(T,el),y=O.cartographicToCartesian(M,er),!n.defined(y)||a.Cartesian3.equalsEpsilon(y,g,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(y,f,i.CesiumMath.EPSILON7)||R.push(a.Cartesian3.clone(y)))));let D=R.length,v=Array(D);for(h=0;h<D;h++){let e=a.Cartographic.fromCartesian(R[h],O);e.height=0,v[h]=e}if((D=(v=s.arrayRemoveDuplicates(v,a.Cartographic.equalsEpsilon)).length)<2)return;let z=[],B=[],V=[],j=[],G=ee,F=et,W=ea,U=en,Z=ei,$=v[0],J=v[1];for(G=q(O,v[D-1],0,G),U=q(O,J,0,U),F=q(O,$,0,F),W=q(O,$,1e3,W),Z=_?Q(G,F,W,U,Z):H($,J,1e3,O,Z),a.Cartesian3.pack(Z,B,0),a.Cartesian3.pack(F,V,0),a.Cartesian3.pack(W,j,0),z.push($.latitude),z.push($.longitude),Y($,J,0,1e3,b,P,O,B,V,j,z),h=1;h<D-1;++h){G=a.Cartesian3.clone(F,G),F=a.Cartesian3.clone(U,F);let e=v[h];q(O,e,1e3,W),q(O,v[h+1],0,U),Q(G,F,W,U,Z),p=B.length,a.Cartesian3.pack(Z,B,p),a.Cartesian3.pack(F,V,p),a.Cartesian3.pack(W,j,p),z.push(e.latitude),z.push(e.longitude),Y(v[h],v[h+1],0,1e3,b,P,O,B,V,j,z)}let eu=v[D-1],ec=v[D-2];if(F=q(O,eu,0,F),W=q(O,eu,1e3,W),_){let e=v[0];Z=Q(G=q(O,ec,0,G),F,W,U=q(O,e,0,U),Z)}else Z=H(ec,eu,1e3,O,Z);if(p=B.length,a.Cartesian3.pack(Z,B,p),a.Cartesian3.pack(F,V,p),a.Cartesian3.pack(W,j,p),z.push(eu.latitude),z.push(eu.longitude),_){for(Y(eu,$,0,1e3,b,P,O,B,V,j,z),p=B.length,h=0;h<3;++h)B[p+h]=B[h],V[p+h]=V[h],j[p+h]=j[h];z.push($.latitude),z.push($.longitude)}return function(n,r,s,l,u,d,p){let h,g,f,m,w,y;let M=r._ellipsoid,T=s.length/3-1,E=8*T,_=4*E,O=36*T,b=E>65535?new Uint32Array(O):new Uint16Array(O),P=new Float64Array(3*E),A=new Float32Array(_),L=new Float32Array(_),S=new Float32Array(_),x=new Float32Array(_),N=new Float32Array(_);p&&(f=new Float32Array(_),m=new Float32Array(_),w=new Float32Array(_),y=new Float32Array(2*E));let R=d.length/2,D=0;eE.height=0,e_.height=0;let v=eO,z=eb;if(p)for(g=0,h=1;h<R;h++)eE.latitude=d[g],eE.longitude=d[g+1],e_.latitude=d[g+2],e_.longitude=d[g+3],v=r.project(eE,v),z=r.project(e_,z),D+=a.Cartesian3.distance(v,z),g+=2;let H=l.length/3;z=a.Cartesian3.unpack(l,0,z);let B,V=0;for(g=3,h=1;h<H;h++)v=a.Cartesian3.clone(z,v),z=a.Cartesian3.unpack(l,g,z),V+=a.Cartesian3.distance(v,z),g+=3;g=3;let j=0,G=0,Y=0,F=0,q=!1,W=a.Cartesian3.unpack(s,0,eA),U=a.Cartesian3.unpack(l,0,eb),Z=a.Cartesian3.unpack(u,0,eL);n&&ed(Z,a.Cartesian3.unpack(s,s.length-6,eP),W,U)&&(Z=a.Cartesian3.negate(Z,Z));let $=0,J=0,Q=0;for(h=0;h<T;h++){let e=a.Cartesian3.clone(W,eP),n=a.Cartesian3.clone(U,eO),o,C,h,T,E=a.Cartesian3.clone(Z,ek);if(q&&(E=a.Cartesian3.negate(E,E)),W=a.Cartesian3.unpack(s,g,eA),U=a.Cartesian3.unpack(l,g,eb),q=ed(Z=a.Cartesian3.unpack(u,g,eL),e,W,U),eE.latitude=d[j],eE.longitude=d[j+1],e_.latitude=d[j+2],e_.longitude=d[j+3],p){let e=function(e,t){let a=Math.abs(e.longitude),n=Math.abs(t.longitude);if(i.CesiumMath.equalsEpsilon(a,i.CesiumMath.PI,i.CesiumMath.EPSILON11)){let n=i.CesiumMath.sign(t.longitude);return e.longitude=n*(a-i.CesiumMath.EPSILON11),1}if(i.CesiumMath.equalsEpsilon(n,i.CesiumMath.PI,i.CesiumMath.EPSILON11)){let a=i.CesiumMath.sign(e.longitude);return t.longitude=a*(n-i.CesiumMath.EPSILON11),2}return 0}(eE,e_);o=r.project(eE,ev),C=r.project(e_,ez);let t=X(C,o,eU);t.y=Math.abs(t.y),h=eH,T=eB,0===e||a.Cartesian3.dot(t,a.Cartesian3.UNIT_Y)>I?(h=ef(r,eE,E,o,eH),T=ef(r,e_,Z,C,eB)):1===e?(T=ef(r,e_,Z,C,eB),h.x=0,h.y=i.CesiumMath.sign(eE.longitude-Math.abs(e_.longitude)),h.z=0):(h=ef(r,eE,E,o,eH),T.x=0,T.y=i.CesiumMath.sign(eE.longitude-e_.longitude),T.z=0)}let _=a.Cartesian3.distance(n,U),O=c.EncodedCartesian3.fromCartesian(e,eX),b=a.Cartesian3.subtract(W,e,eV),R=a.Cartesian3.normalize(b,eY),v=a.Cartesian3.subtract(n,e,ej);v=a.Cartesian3.normalize(v,v);let z=a.Cartesian3.cross(R,v,eY);z=a.Cartesian3.normalize(z,z);let H=a.Cartesian3.cross(v,E,eF);H=a.Cartesian3.normalize(H,H);let K=a.Cartesian3.subtract(U,W,eG);K=a.Cartesian3.normalize(K,K);let ee=a.Cartesian3.cross(Z,K,eq);ee=a.Cartesian3.normalize(ee,ee);let et=_/V,ea=$/V,en,ei,er,es=0,eo=0,el=0;if(p){es=a.Cartesian3.distance(o,C),en=c.EncodedCartesian3.fromCartesian(o,eW),ei=a.Cartesian3.subtract(C,o,eU),er=a.Cartesian3.normalize(ei,eZ);let e=er.x;er.x=er.y,er.y=-e,eo=es/D,el=J/D}for(B=0;B<8;B++){let e=F+4*B,t=G+2*B,n=e+3,i=B<4?1:-1,r=2===B||3===B||6===B||7===B?1:-1;a.Cartesian3.pack(O.high,A,e),A[n]=b.x,a.Cartesian3.pack(O.low,L,e),L[n]=b.y,a.Cartesian3.pack(H,S,e),S[n]=b.z,a.Cartesian3.pack(ee,x,e),x[n]=et*i,a.Cartesian3.pack(z,N,e);let s=ea*r;0===s&&r<0&&(s=9),N[n]=s,p&&(f[e]=en.high.x,f[e+1]=en.high.y,f[e+2]=en.low.x,f[e+3]=en.low.y,w[e]=-h.y,w[e+1]=h.x,w[e+2]=T.y,w[e+3]=-T.x,m[e]=ei.x,m[e+1]=ei.y,m[e+2]=er.x,m[e+3]=er.y,y[t]=eo*i,0==(s=el*r)&&r<0&&(s=9),y[t+1]=s)}let eu=t.Rectangle.fromCartographicArray(eS,ex),ec=k.getMinimumMaximumHeights(eu,M),eC=ec.minimumTerrainHeight,ep=ec.maximumTerrainHeight;Q+=eC+ep,ey(e,n,eC,ep,eR,eI),ey(W,U,eC,ep,eD,eN);let eh=a.Cartesian3.multiplyByScalar(z,i.CesiumMath.EPSILON5,e$);a.Cartesian3.add(eR,eh,eR),a.Cartesian3.add(eD,eh,eD),a.Cartesian3.add(eI,eh,eI),a.Cartesian3.add(eN,eh,eN),eT(eR,eD),eT(eI,eN),a.Cartesian3.pack(eR,P,Y),a.Cartesian3.pack(eD,P,Y+3),a.Cartesian3.pack(eN,P,Y+6),a.Cartesian3.pack(eI,P,Y+9),eh=a.Cartesian3.multiplyByScalar(z,-2*i.CesiumMath.EPSILON5,e$),a.Cartesian3.add(eR,eh,eR),a.Cartesian3.add(eD,eh,eD),a.Cartesian3.add(eI,eh,eI),a.Cartesian3.add(eN,eh,eN),eT(eR,eD),eT(eI,eN),a.Cartesian3.pack(eR,P,Y+12),a.Cartesian3.pack(eD,P,Y+15),a.Cartesian3.pack(eN,P,Y+18),a.Cartesian3.pack(eI,P,Y+21),j+=2,g+=3,G+=16,Y+=24,F+=32,$+=_,J+=es}g=0;let K=0;for(h=0;h<T;h++){for(B=0;B<eK;B++)b[g+B]=eQ[B]+K;K+=8,g+=eK}e.BoundingSphere.fromVertices(s,a.Cartesian3.ZERO,3,eJ[0]),e.BoundingSphere.fromVertices(l,a.Cartesian3.ZERO,3,eJ[1]);let ee=e.BoundingSphere.fromBoundingSpheres(eJ);ee.radius+=Q/(2*T);let et={position:new C.GeometryAttribute({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:P}),startHiAndForwardOffsetX:e3(A),startLoAndForwardOffsetY:e3(L),startNormalAndForwardOffsetZ:e3(S),endNormalAndTextureCoordinateNormalizationX:e3(x),rightNormalAndTextureCoordinateNormalizationY:e3(N)};return p&&(et.startHiLo2D=e3(f),et.offsetAndRight2D=e3(m),et.startEndNormals2D=e3(w),et.texcoordNormalization2D=new C.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:y})),new C.Geometry({attributes:et,indices:b,boundingSphere:ee})}(_,A,V,j,B,z,E)};let eu=new a.Cartesian3,ec=new a.Matrix3,eC=new e.Quaternion;function ed(t,n,r,s){let o=X(r,n,eu),l=a.Cartesian3.dot(o,t);if(l>I||l<N){let n=X(s,r,J),o=l<N?i.CesiumMath.PI_OVER_TWO:-i.CesiumMath.PI_OVER_TWO,u=e.Quaternion.fromAxisAngle(n,o,eC),c=a.Matrix3.fromQuaternion(u,ec);return a.Matrix3.multiplyByVector(c,t,t),!0}return!1}let ep=new a.Cartographic,eh=new a.Cartesian3,eg=new a.Cartesian3;function ef(e,t,n,r,s){let o=a.Cartographic.toCartesian(t,e._ellipsoid,eh),l=a.Cartesian3.add(o,n,eg),u=!1,c=e._ellipsoid,C=c.cartesianToCartographic(l,ep);Math.abs(t.longitude-C.longitude)>i.CesiumMath.PI_OVER_TWO&&(u=!0,l=a.Cartesian3.subtract(o,n,eg),C=c.cartesianToCartographic(l,ep)),C.height=0;let d=e.project(C,s);return(s=a.Cartesian3.subtract(d,r,s)).z=0,s=a.Cartesian3.normalize(s,s),u&&a.Cartesian3.negate(s,s),s}let em=new a.Cartesian3,ew=new a.Cartesian3;function ey(e,t,n,i,r,s){let o=a.Cartesian3.subtract(t,e,em);a.Cartesian3.normalize(o,o);let l=a.Cartesian3.multiplyByScalar(o,n-0,ew);a.Cartesian3.add(e,l,r),l=a.Cartesian3.multiplyByScalar(o,i-1e3,ew),a.Cartesian3.add(t,l,s)}let eM=new a.Cartesian3;function eT(e,t){let n=p.Plane.getPointDistance(K,e),r=p.Plane.getPointDistance(K,t),s=eM;i.CesiumMath.equalsEpsilon(n,0,i.CesiumMath.EPSILON2)?(s=X(t,e,s),a.Cartesian3.multiplyByScalar(s,i.CesiumMath.EPSILON2,s),a.Cartesian3.add(e,s,e)):i.CesiumMath.equalsEpsilon(r,0,i.CesiumMath.EPSILON2)&&(s=X(e,t,s),a.Cartesian3.multiplyByScalar(s,i.CesiumMath.EPSILON2,s),a.Cartesian3.add(t,s,t))}let eE=new a.Cartographic,e_=new a.Cartographic,eO=new a.Cartesian3,eb=new a.Cartesian3,eP=new a.Cartesian3,eA=new a.Cartesian3,ek=new a.Cartesian3,eL=new a.Cartesian3,eS=[eE,e_],ex=new t.Rectangle,eI=new a.Cartesian3,eN=new a.Cartesian3,eR=new a.Cartesian3,eD=new a.Cartesian3,ev=new a.Cartesian3,ez=new a.Cartesian3,eH=new a.Cartesian3,eB=new a.Cartesian3,eV=new a.Cartesian3,ej=new a.Cartesian3,eG=new a.Cartesian3,eY=new a.Cartesian3,eF=new a.Cartesian3,eq=new a.Cartesian3,eX=new c.EncodedCartesian3,eW=new c.EncodedCartesian3,eU=new a.Cartesian3,eZ=new a.Cartesian3,e$=new a.Cartesian3,eJ=[new e.BoundingSphere,new e.BoundingSphere],eQ=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],eK=eQ.length;function e3(e){return new C.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return R._projectNormal=ef,function(e,t){return k.initialize().then(function(){return n.defined(t)&&(e=R.unpack(e,t)),R.createGeometry(e)})}});